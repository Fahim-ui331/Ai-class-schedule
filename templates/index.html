<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Schedule Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="goschool">
    <header>
        <div class="container">
            <!-- Backward & Forward buttons (top-left) -->
            <div class="nav-arrows">
                <button onclick="window.location.href='index.html'" aria-label="Go Back">⬅</button>
                <button onclick="history.forward()" aria-label="Go Forward">➡</button>
            </div>

            <h1 class="brand"><span class="cap"></span> AI-Based Class Schedule Generator</h1>
            <nav>
                <a href="index.html" class="active">Dashboard</a>
                <!-- Open selected.html in a new tab -->
                <a href="selected.html" target="_blank">Select Schedule</a>
                <a href="#">Profile</a>
                <a href="#">Logout</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container grid">
            <section class="student-info">
                <h2>Student Information</h2>
                <div class="card">
                    <!--Dynamically populated-->
                </div>
                <section class="schedule-selection">
                    <h2>Select Preferred Schedule</h2>
                    <form id="Schedule-form">
                        <label for="course">Course:</label>
                        <select id="course" name="course">
                            <option value="CS101">Programming (CS101)</option>
                            <option value="MATH201">Math (MATH201)</option>
                            <option value="PHYS301">Physics (PHYS301)</option>
                            <option value="ENGL101">English (ENGL101)</option>
                        </select>
                        <label for="section">Preferred Section</label>
                        <select id="section" name="section">
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </Select>
                        <button type="submit">Save Preferences</button>
                    </form>
                </section>
                <select class="assigned-schedule">
                    <h2>Assigned Sections Overview</h2>
                    <table class="assigned-table">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Course</th>
                                <th>Preferred Sections</th>
                                <th>Assigned Section</th>
                                <th>Department</th>
                                <th>Semester</th>
                                <th>Course Load</th>
                            </tr>
                        </thead>
                        <tbody id="assigned-table-body">
                            <!-- Dynamically populated -->
                        </tbody>
                    </table>
                    <h2>Weekly Timetables for Eligible Studnents</h2>
                    <div id="timetable-container">
                        <!-- Dynamically populated timetalbes -->
                    </div>
                    </main>
                    <footer>
                    <p>&copy; 2025 AI-Based Class Schedule Generator | United International University</p>
                </footer>
                <Script>
                    // Sample data (replace with actual CSV Loading in production)
                    const assignedSection =[
                        { Student_ID: "S006", Name: "Student_6", GPA: 3.95, Course: "Programming", Preferred_Sections: "C,B", Assigned_Section: "C", Department: "CSE", Semester: "Spring2025", Course_Load: 17 },
            { Student_ID: "S001", Name: "Student_1", GPA: 3.90, Course: "Math", Preferred_Sections: "A,B", Assigned_Section: "A", Department: "CSE", Semester: "Spring2025", Course_Load: 15 },
            { Student_ID: "S009", Name: "Student_9", GPA: 3.85, Course: "Physics", Preferred_Sections: "A", Assigned_Section: "A", Department: "CSE", Semester: "Summer2025", Course_Load: 18 },
            { Student_ID: "S003", Name: "Student_3", GPA: 3.75, Course: "Physics", Preferred_Sections: "A", Assigned_Section: "A", Department: "EEE", Semester: "Summer2025", Course_Load: 18 },
            { Student_ID: "S008", Name: "Student_8", GPA: 3.50, Course: "Math", Preferred_Sections: "A,B", Assigned_Section: "A", Department: "EEE", Semester: "Fall2025", Course_Load: 16 },
            { Student_ID: "S005", Name: "Student_5", GPA: 3.40, Course: "Math", Preferred_Sections: "B,A", Assigned_Section: "B", Department: "ENG", Semester: "Fall2025", Course_Load: 14 },
            { Student_ID: "S010", Name: "Student_10", GPA: 3.20, Course: "English", Preferred_Sections: "C,D", Assigned_Section: "D", Department: "ENG", Semester: "Spring2025", Course_Load: 12 },
            { Student_ID: "S002", Name: "Student_2", GPA: 2.85, Course: "English", Preferred_Sections: "C,D", Assigned_Section: "Not_Assigned", Department: "BBA", Semester: "Fall2025", Course_Load: 12 },
            { Student_ID: "S007", Name: "Student_7", GPA: 2.60, Course: "English", Preferred_Sections: "D,C", Assigned_Section: "Not_Assigned", Department: "BBA", Semester: "Summer2025", Course_Load: 13 },
            { Student_ID: "S004", Name: "Student_4", GPA: 2.80, Course: "Programming", Preferred_Sections: "B,C", Assigned_Section: "Not_Assigned", Department: "CSE", Semester: "Spring2025", Course_Load: 16 }
                    ];

                    const courses = [
            { course_id: "CS101", section: "A", day: "Monday", start_time: "09:00", end_time: "10:30", room: "Room 101", instructor: "Dr. Smith" },
            { course_id: "CS101", section: "B", day: "Wednesday", start_time: "14:00", end_time: "15:30", room: "Room 102", instructor: "Dr. Lee" },
            { course_id: "CS101", section: "C", day: "Monday", start_time: "09:00", end_time: "10:30", room: "Room 101", instructor: "Dr. Smith" },
            { course_id: "MATH201", section: "A", day: "Tuesday", start_time: "10:00", end_time: "11:30", room: "Room 201", instructor: "Prof. Kim" },
            { course_id: "MATH201", section: "B", day: "Tuesday", start_time: "14:00", end_time: "15:30", room: "Room 201", instructor: "Prof. Kim" },
            { course_id: "PHYS301", section: "A", day: "Thursday", start_time: "09:00", end_time: "10:30", room: "Room 301", instructor: "Dr. Patel" },
            { course_id: "ENGL101", section: "C", day: "Tuesday", start_time: "13:00", end_time: "14:30", room: "Room 401", instructor: "Dr. Brown" },
            { course_id: "ENGL101", section: "D", day: "Friday", start_time: "11:00", end_time: "12:30", room: "Room 402", instructor: "Dr. Green" }
        ];
        // Map Course to course_id
        const courseMap ={
            "Programming": "CS101",
            "Math": "MATH201",
            "Physics": "PHYS301",
            "English": "ENGL101"
        };
        //Populate student info (example for first eligible student)
                const studentInfoContainer = document.getElementById('student-info-container');
                const firstEligible = assignedSection.find(s => s.GPA >= 3.50 && (s.Semester !== 'Fall2025' || true)); 
                // Assuming payment cleared
        if (firstEligible) {
            studentInfoContainer.innerHTML = `
                <p><strong>Name:</strong> ${firstEligible.Name}</p>
                <p><strong>Student ID:</strong> ${firstEligible.Student_ID}</p>
                <p><strong>CGPA:</strong> ${firstEligible.GPA} <span class="badge badge-priority">High Priority</span></p>
                <p><strong>Payment Status:</strong> <span class="badge badge-cleared">Cleared</span></p>
            `;
        }

        // Populate assigned sections table
        const assignedTableBody = document.getElementById('assigned-table-body');
        assignedSections.forEach(student => {
            const isEligible = student.GPA >= 3.50 && (student.Semester !== 'Fall2025' || true); // Adjust with payment data
            const rowClass = isEligible ? '' : 'ineligible';
            assignedTableBody.innerHTML += `
                <tr class="${rowClass}">
                    <td>${student.Student_ID}</td>
                    <td>${student.Name}</td>
                    <td>${student.GPA}</td>
                    <td>${student.Course}</td>
                    <td>${student.Preferred_Sections}</td>
                    <td>${student.Assigned_Section}</td>
                    <td>${student.Department}</td>
                    <td>${student.Semester}</td>
                    <td>${student.Course_Load}</td>
                </tr>
            `;
        });

        // Generate weekly timetables for eligible students
        const timetableContainer = document.getElementById('timetable-container');
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
        const timeSlots = ['08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00'];

        assignedSections
            .filter(s => s.GPA >= 3.50 && (s.Semester !== 'Fall2025' || true))
            .forEach(student => {
                const courseId = courseMap[student.Course];
                const section = courses.find(c => c.course_id === courseId && c.section === student.Assigned_Section);
                if (section && student.Assigned_Section !== 'Not_Assigned') {
                    let tableHTML = `
                        <h3>Timetable for ${student.Name} (${student.Student_ID})</h3>
                        <table class="timetable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    ${days.map(day => `<th>${day}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                    `;
                    timeSlots.forEach(time => {
                        tableHTML += `<tr><td>${time}</td>`;
                        days.forEach(day => {
                            if (section.day === day && section.start_time === time) {
                                tableHTML += `<td>${section.start_time}-${section.end_time}: ${student.Course}-${section.section} (${section.room})</td>`;
                            } else {
                                tableHTML += `<td></td>`;
                            }
                        });
                        tableHTML += `</tr>`;
                    });
                    tableHTML += `</tbody></table>`;
                    timetableContainer.innerHTML += tableHTML;
                } else {
                    timetableContainer.innerHTML += `
                        <h3>Timetable for ${student.Name} (${student.Student_ID})</h3>
                        <p class="ineligible">No schedule generated: ${student.Assigned_Section === 'Not_Assigned' ? 'No section assigned' : 'Course data unavailable'}.</p>
                    `;
                }
            });

        // Handle form submission (save preferences)
        document.getElementById('schedule-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const course = document.getElementById('course').value;
            const section = document.getElementById('section').value;
            alert(`Preferences saved: Course ${course}, Section ${section}`);
            // In production, send to backend (e.g., update assigned_sections.csv)
        });
    </script>
</body>
</html>